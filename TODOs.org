#+TITLE: Hammerspoon Config TODOs
#+STARTUP: overview
#+TAGS: feature refactor doc architecture perf tooling

* Inbox

* Event/Behavior System
** Hierarchy
*** LATER [#C] Cache ancestor lookups :perf:
    - Currently recalculated each time
    - Invalidate cache on derive/underive

*** LATER [#C] Event-hierarchies have schemas that inherit to children :architecture:
    - Event-kinds define schemas
    - Child events inherit and extend parent schemas

** Event Sources
*** NEXT Separate event-source class/instance concepts                :refactor:

*** LATER [#A] Event-sources can specify what they can emit           :feature:

*** LATER [#A] Event-sources can be muted                             :feature:

** Behaviors
*** LATER [#C] Think of behavior dependency/priority/ordering strategies :architecture:
    - Define execution order when multiple behaviors match
    - Handle dependencies between behaviors

** Subscriptions
*** LATER [#B] Consider accepting a set of event-selectors for more flexibility :feature:
    - Currently subscribe-behavior takes a single event-selector
    - Could allow subscribing to multiple event-selectors at once

*** LATER [#B] Disable events, behaviors, subscriptions, tags, sources :feature:
    - Add ability to pause/disable at various levels
    - Could be global or per-subscription

*** LATER [#C] Add debounce/throttle/delay to subscriptions           :feature:
    - Allow subscriptions to specify timing behavior
    - Useful for high-frequency events like file watchers

** Components
*** LATER [#A] Define tag attachment to behavior/event-source-instance :architecture:

*** LATER [#C] Define component concept                           :architecture:
    - Has config and state
    - Can be queried for config/state
    - Has event-sources and commands
    - event-source+config+state+commands+presentation

*** LATER [#C] Add user commands, key mappings, etc on top of event/behavior system :architecture:

** API/Naming
*** LATER [#A] Refactor rest of the code to use the event/behavior pattern :refactor:

** Tooling
*** LATER [#B] Validate schemas in debug mode                         :tooling:

*** LATER [#C] Create a UI to see the events/behaviors/subscriptions  :tooling:

*** LATER [#C] Add actions to the UI and more debugging tools         :tooling:

*** LATER [#C] Create a tool to export hierarchies into Graphviz      :tooling:

*** LATER [#C] Persist state into SQLite                              :tooling:
    - Save events, behaviors, subscriptions, hierarchy

** Documentation
*** LATER [#C] Create a tutorial-style doc for the event/behavior pattern :doc:

*** LATER [#C] Create doc explaining 4 orthogonal concepts               :doc:
    - Event-source, Event, Behavior, Subscription
    - How they are independent but compose together

* Hammerspoon Config
** Setup
*** LATER [#C] cliInstall doesn't work due to privileges              :tooling:
    - For now linked manually
    - Need to investigate proper permission handling for hs.ipc.cliInstall

** UI/UX
*** LATER [#C] Proper shortcut and configs for expose                 :feature:
    - Current expose shortcut is ctrl-cmd-e
    - Need configurable shortcuts

*** LATER [#C] Make thumbnail height advisable when #102 lands        :feature:
    - Related to GitHub issue #102
    - Thumbnail height calculation should be configurable/advisable

* Archived
** Event/Behavior System
*** DONE derive should check for cycles                               :feature:
    - Prevent A derives B derives A situations
    - Uses isa? to detect if parent already derives from child

*** DONE Make hierarchies non-global :architecture:
    - Create make-hierarchy function
    - Allow multiple independent hierarchies

*** DONE Define all events in one file with proper domain-based event-kinds :refactor:

*** DONE Separate subscription into its own module :refactor:

*** DONE Rename functions to define-event/behavior/etc                :refactor:

*** DONE Rename registry maps to *-register                          :refactor:

*** DONE Validate dependencies when defining things                   :feature:
    - When behavior definition mentions event-names, validate they exist
    - Warns (not errors) if dependencies are missing (due to load order)
